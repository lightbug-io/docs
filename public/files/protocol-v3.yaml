version: 3
limits:
  MAX_DATA_FIELD_LEN: 200 # As currently defined in Firmware
  MAX_HEADER_FILED_LEN: 20 # As currently defined in Firmware
groups:
  general:
    description: "General messages"
  bootserver:
    description: "Device to Boot server communication"
  livelink:
    description: "Device to LiveLink server communication"
  ondevice:
    description: "On device communication (between CPUs)"
  ondevice-ux:
    description: "On device communication (between CPUs), specifically for user interface and interactions"
header:
  1:
    name: "Message ID"
    description: "ID that can be used by receiver to ACK, and client to track for various responses, or re-sends"
    type: "uintn"
  2:
    name: "Client ID"
    description: "ID of the client sending the message"
    type: "uintn"
  3:
    name: "Response to Message ID"
    description: "ID of the message that is being responded to"
    type: "uintn"
  4:
    name: "Message Status"
    description: "Status of the message. If omitted, assume OK?"
    type: "uintn"
    values:
      1:
        name: "OK"
        description: "Everything appears to be OK"
      2:
        name: "NOT_OK"
        description: "Something went wrong while processing the message"
  5:
    name: "Message Method"
    description: "Request a service to be perform an action"
    type : "uintn"
    values:
      1:
        name: "SET"
        description: "Set one or more values that are provided in the message payload"
      2:
        name: "GET"
        description: "Get one or more values that have their types provided in the message payload. If no payload types are provided, all available values are returned"
      3:
        name: "SUBSCRIBE"
        description: "Subscribe to a value or values. If no payload types are provided, all available values will be subscribed to. If a value changes, the service will send a message with the new value"

  10:
    name: "Forwarded For"
    description: "ID of the client sending the original message that is being forwarded"
  11:
    name: "Forwarded RSSI"
    description: "RSSI of forwarded message"
  12:
    name: "Forwarded SNR"
    description: "SNR  of forwarded message"
  13:
    name: "Forwarded Type"
    description: "Type  of forwarded message"
    type: "uintn"
    values:
      1:
        name: "LORA Base Station"
messages:
  5:
    name: "General ACK"
    description: "General ACK message"
    group: "general"
    data:
      1:
        name: "ACKed Type"
        description: "Type of previous message being ACKed"
        type: "uint16"
      2:
        name: "ACKed ID"
        description: "ID of previous message being ACKed, if provided in the original message header"
        type: "uintn"
  6:
    name: "General Keep Alive"
    description: "General keep alive message"
    group: "general"
  30:
    name: "Transmit Now"
    description: "Transmit data immediately"
    group: "ondevice"
    data:
      1:
        name: "Search GPS"
        description: "0 = no, 1 = yes"
        type: "uint8"
      2:
        name: "Data"
        description: "can be up to 200 bytes"
        type: "bytes"
      3:
        name: "Retries"
        description: "0 - 10"
        type: "uint8"
      4:
        name: "Priority"
        description: "0 - 1"
        type: "uint8"
  31:
    name: "GSM CFUN"
    description: "GSM functionality control"
    group: "ondevice"
    data:
      1:
        name: "Mode"
        description: "0 or 1"
        type: "uint8"
      2:
        name: "Duration"
        description: "max 259200, 4 bytes values"
        type: "uint32"
      3:
        name: "GSM ONOFF"
        description: ""
        type: "uint8"
  32:
    name: "GSM IMEI"
    description: "GSM IMEI information"
    group: "ondevice"
    data:
      1:
        name: "IMEI"
        description: "IMEI"
        type: "ascii"
  33:
    name: "GSM ICCID"
    description: "GSM ICCID information"
    group: "ondevice"
    data:
      1:
        name: "ICCID"
        description: "ICCID"
        type: "ascii"
  34:
    name: "Device Status"
    description: "Device status information"
    group: "ondevice"
    data:
      1:
        name: "Battery"
        description: "Battery level"
        type: "uint8"
      2:
        name: "Signal Strength"
        description: "Signal strength"
        type: "uint8"
      3:
        name: "Device Mode"
        description: "Device mode"
        type: "uint8"
  35:
    name: "Device ID"
    description: "Device ID information"
    group: "ondevice"
    data:
      1:
        name: "ID"
        description: "ID"
        type: "uintn"
  36:
    name: "Device Time"
    description: "Device time information"
    group: "ondevice"
    data:
      1:
        name: "Unix Time"
        description: "Unix time"
        type: "uint32"
      2:
        name: "Year"
        description: "Year"
        type: "uint16"
      3:
        name: "Month"
        description: "Month"
        type: "uint8"
      4:
        name: "Date"
        description: "Date"
        type: "uint8"
      5:
        name: "Weekday"
        description: "Weekday (1 monday etc)"
        type: "uint8"
      6:
        name: "Hour"
        description: "Hour"
        type: "uint8"
      7:
        name: "Minute"
        description: "Minute"
        type: "uint8"
      8:
        name: "Second"
        description: "Second"
        type: "uint8"
  37:
    name: "Last Position"
    description: "Last known position"
    group: "ondevice"
    data:
      1:
        name: "alt"
        description: "Altitude"
        type: "uintn" # TODO update type
      2:
        name: "lat"
        description: "Latitude"
        type: "uintn" # TODO update type
      3:
        name: "lng"
        description: "Longitude"
        type: "uintn" # TODO update type
      4:
        name: "speed"
        description: "Speed"
        type: "uintn" # TODO update type
      # TODO add last position type, rtk, gps, etc
  39:
    name: "RTK"
    description: "RTK information"
    group: "ondevice"
    data:
      1:
        name: "enabled"
        description: "Is RTK enabled?"
        type: "uint8"
        values:
          1:
            name: "Enabled"
          2:
            name: "Disabled"
      2:
        name: "Request"
        description: "Request regular updates of RTK data?"
        type: "uint8"
        values:
          1:
            name: "Yes"
          2:
            name: "No"
  1004:
    name: "LORA V4 Forwarding"
    description: "Forwarding LORA V4 message"
  10000:
    name: "UX Command Start"
    description: "Start UX command"
    group: "ondevice-ux"
  10009:
    name: "UX Text Page"
    description: "UX text page"
    group: "ondevice-ux"
  10010:
    name: "UX Update Menu"
    description: "Update UX menu"
    group: "ondevice-ux"
  10011:
    name: "UX Draw Bitmap"
    description: "Draw bitmap in UX"
    group: "ondevice-ux"
  10012:
    name: "UX Menu Select"
    description: "Select UX menu item"
    group: "ondevice-ux"
  10013:
    name: "UX Button Press"
    description: "Press UX button"
    group: "ondevice-ux"
  10014:
    name: "UX Full Refresh"
    description: "Full refresh of UX"
    group: "ondevice-ux"
  11000:
    name: "UX Command End"
    description: "End UX command"
    group: "ondevice-ux"
